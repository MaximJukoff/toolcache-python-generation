trigger: none
pr:
  autoCancel: false
  branches:
    include:
    - master

jobs:
- job: Run_Builds
  pool:
    name: Azure Pipelines
    vmImage: 'vs2017-win2016'

  steps:
  - checkout: self
    submodules: true

  - task: PowerShell@2
    displayName: Env Variables
    inputs:
      TargetType: inline
      script: |
        Get-ChildItem Env:

  - task: PowerShell@2
    displayName: 'Run builds'
    inputs:
      targetType: filePath
      filePath: './azure-pipelines/run-builds.ps1 '
      arguments: '-AzDoOrganizationName $(ORGANIZATION_NAME) `
                   -AzDoProjectName $(PROJECT_NAME) `
                   -AzDoAccessToken $(ACCESS_TOKEN) `
                   -SourceBranch $Env:BUILD_SOURCEBRANCH `
                   -PythonVersions $(PYTHON_VERSIONS) `
                   -BuildId $(BUILD_ID)'